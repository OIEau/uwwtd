<?php

function uwwtd_page_stats_graphs(){

	require_once 'uwwtd.stats.inc';
	drupal_add_js('sites/all/libraries/d3/d3.v3.min.js');
	drupal_add_js(drupal_get_path('module', 'uwwtd') . '/lib/flip/jquery.flip.min.js');
	drupal_add_js(drupal_get_path('module', 'uwwtd') . '/js/uwwtd.js');


	$page = "";
	$title = 'Graphs for national stats';
	drupal_set_title($title);  //todo
	//$page =  '<h1 align="center">'.$title.'</h1><br/>';


	/*
	 * LOADING DATA ...
	 */
	// Total generated by compliance
	$Data_uwwtd_stat_national_compliance = array();
	$String_uwwtd_stat_national_compliance = '';

	$results = uwwtd_stat_national_compliance();
	foreach ($results as $result){
		$Data_uwwtd_stat_national_compliance[] = array(
				"value" => $result['generated_sum'],
				"label" => $result['field_aggcompliance_value_format'],
				"valueformat" => $result['generated_sum_format'],
		);
		$String_uwwtd_stat_national_compliance .= $result['field_aggcompliance_value_format'] . ' : ' . $result['generated_sum_format'] . '<br/>';
	}

	// Total agglomerations by compliance
	$Data_uwwtd_stat_agglomeration_compliance = array();
	$String_uwwtd_stat_agglomeration_compliance = '';

	$results = uwwtd_stat_national_compliance();
	foreach ($results as $result){
		$Data_uwwtd_stat_agglomeration_compliance[] = array(
				"value" => $result['total_count'],
				"label" => $result['field_aggcompliance_value_format'],
				"valueformat" => $result['total_count_format'],
		);
		$String_uwwtd_stat_agglomeration_compliance .= $result['field_aggcompliance_value_format'] . ' : ' . $result['total_count_format'] . '<br/>';
	}

	//Total load entering by compliance

	$aData_uwwtd_stat_national_uwwtpC = array();
	$aString_uwwtd_stat_national_uwwtpC = '';

	$results = uwwtd_stat_national_uwwtp('compliance');
	foreach ($results as $result){
		$aData_uwwtd_stat_national_uwwtpC[] = array(
				"value" => $result['loadentering_sum'],
				"label" => $result['field_uwwcompliance_value_format'],
				"valueformat" => $result['loadentering_sum_format'],
		);
		$aString_uwwtd_stat_national_uwwtpC .= $result['field_uwwcompliance_value_format'] . ' : ' . $result['loadentering_sum_format'] . '<br/>';
	}

	//Load entering by compliance : total agglomerations

	$aData_uwwtd_stat_agglomeration_uwwtpC = array();
	$aString_uwwtd_stat_agglomeration_uwwtpC = '';

	$results = uwwtd_stat_national_uwwtp('compliance');
	foreach ($results as $result){
		$aData_uwwtd_stat_agglomeration_uwwtpC[] = array(
				"value" => $result['total_count'],
				"label" => $result['field_uwwcompliance_value_format'],
				"valueformat" => $result['total_count_format'],
		);
		$aString_uwwtd_stat_agglomeration_uwwtpC .= $result['field_uwwcompliance_value_format'] . ' : ' . $result['total_count_format'] . '<br/>';
	}

	//Total load entering by treatment type

	$aData_uwwtd_stat_national_uwwtpT = array();
	$aString_uwwtd_stat_national_uwwtpT = '';

	$results = uwwtd_stat_national_uwwtp('treatmenttype');
	foreach ($results as $result){
		$aData_uwwtd_stat_national_uwwtpT[] = array(
				"value" => $result['loadentering_sum'],
				"label" => $result['field_uwwtreatmenttype_value_format'],
				"valueformat" => $result['loadentering_sum_format'],
		);
		$aString_uwwtd_stat_national_uwwtpT .= $result['field_uwwtreatmenttype_value_format'] . ' : ' . $result['loadentering_sum_format'] . '<br/>';
	}

	//Load entering by treatment type : total agglomerations

	$aData_uwwtd_stat_agglomeration_uwwtpT = array();
	$aString_uwwtd_stat_agglomeration_uwwtpT = '';

	$results = uwwtd_stat_national_uwwtp('treatmenttype');
	foreach ($results as $result){
		$aData_uwwtd_stat_agglomeration_uwwtpT[] = array(
				"value" => $result['total_count'],
				"label" => $result['field_uwwtreatmenttype_value_format'],
				"valueformat" => $result['total_count_format'],
		);
		$aString_uwwtd_stat_agglomeration_uwwtpT .= $result['field_uwwtreatmenttype_value_format'] . ' : ' . $result['total_count_format'] . '<br/>';
	}

	//Total generated load by agglomeration

	$aData_uwwtd_stat_national_generated_by_agglomeration = array();
	$aString_uwwtd_stat_national_generated_by_agglomeration = '';

	$results = uwwtd_stat_national_generated_by_agglomeration();
	foreach ($results as $result){

		$aData_uwwtd_stat_national_generated_by_agglomeration[] = array(
				"type" => $result['type'],
        		"generated" => $result['generated_sum'],
		);
		$aString_uwwtd_stat_national_generated_by_agglomeration .= $result['type'] . ' : ' . $result['generated_sum'] . '<br/>';

	}

	//Total load entering and discharged

	$aData_uwwtd_load_ent_and_dis = array();
	$aString_uwwtd_load_ent_and_dis = '';

	$results = uwwtd_stat_national_treatmentplant();
	foreach ($results as $result){

		$aData_uwwtd_load_ent_and_dis[] = array(
				"type" => "BOD",
				"entering" => $result['bodin_sum'],
				"discharged" => $result['bodout_sum']
		);
		$aString_uwwtd_load_ent_and_dis .= 'BOD entering : ' . $result['bodin_sum_format'] . '<br/>';
		$aString_uwwtd_load_ent_and_dis .= 'BOD discharged : ' . $result['bodout_sum_format'] . '<br/>';
		$aData_uwwtd_load_ent_and_dis[] = array(
				"type" => "COD",
				"entering" => $result['codin_sum'],
				"discharged" => $result['codout_sum']
		);
		$aString_uwwtd_load_ent_and_dis .= 'COD entering : ' . $result['codin_sum_format'] . '<br/>';
		$aString_uwwtd_load_ent_and_dis .= 'COD discharged : ' . $result['codout_sum_format'] . '<br/>';
		$aData_uwwtd_load_ent_and_dis[] = array(
				"type" => "N",
				"entering" => $result['nin_sum'],
				"discharged" => $result['nout_sum']
		);
		$aString_uwwtd_load_ent_and_dis .= 'N entering : ' . $result['nin_sum_format'] . '<br/>';
		$aString_uwwtd_load_ent_and_dis .= 'N discharged : ' . $result['nout_sum_format'] . '<br/>';
		$aData_uwwtd_load_ent_and_dis[] = array(
				"type" => "P",
				"entering" => $result['pin_sum'],
				"discharged" => $result['pout_sum']
		);
		$aString_uwwtd_load_ent_and_dis .= 'P entering : ' . $result['pin_sum_format'] . '<br/>';
		$aString_uwwtd_load_ent_and_dis .= 'P discharged : ' . $result['pout_sum_format'] . '<br/>';
	}
	$aColor_uwwtd_load_ent_and_dis ['domain'] = array (
			'entering',
			'discharged'
	);
	$aColor_uwwtd_load_ent_and_dis ['range'] = array (
			'#74FFE0',
			'#C00000'
	);

	//BOD, COD, N, P concentration

	$aData_uwwtd_per_ent_and_dis = array();
	$aString_uwwtd_per_ent_and_dis = '';

	$results = uwwtd_stat_national_treatmentplant();
	foreach ($results as $result){

		$aData_uwwtd_per_ent_and_dis[] = array(
				"type" => "BOD",
				"entering" => $result['bodin_sum'],
				"discharged" => $result['bodout_sum']
		);
		$aString_uwwtd_per_ent_and_dis .= t('Incoming concentration BOD (mg/l): ') . $result['bodin_sum_format'] . '<br/>';
		$aString_uwwtd_per_ent_and_dis .= t('Discharged concentration BOD (mg/l): ') . $result['bodout_sum_format'] . '<br/>';
		$aString_uwwtd_per_ent_and_dis .= t('Rate for BOD: ') . $result['bodout_sum_format'] . '<br/>';
		$aData_uwwtd_per_ent_and_dis[] = array(
				"type" => "COD",
				"entering" => $result['codin_sum'],
				"discharged" => $result['codout_sum']
		);
		$aString_uwwtd_per_ent_and_dis .= t('Incoming concentration COD (mg/l): ') . $result['codin_sum_format'] . '<br/>';
		$aString_uwwtd_per_ent_and_dis .= t('Discharged concentration COD (mg/l): ') . $result['codout_sum_format'] . '<br/>';
		$aData_uwwtd_per_ent_and_dis[] = array(
				"type" => "N",
				"entering" => $result['nin_sum'],
				"discharged" => $result['nout_sum']
		);
		$aString_uwwtd_per_ent_and_dis .= t('Incoming concentration N (mg/l): ') . $result['nin_sum_format'] . '<br/>';
		$aString_uwwtd_per_ent_and_dis .= t('Discharged concentration N (mg/l): ') . $result['nout_sum_format'] . '<br/>';
		$aData_uwwtd_per_ent_and_dis[] = array(
				"type" => "P",
				"entering" => $result['pin_sum'],
				"discharged" => $result['pout_sum']
		);
		$aString_uwwtd_per_ent_and_dis .= t('Incoming concentration P (mg/l): ') . $result['pin_sum_format'] . '<br/>';
		$aString_uwwtd_per_ent_and_dis .= t('Discharged concentration P (mg/l): ') . $result['pout_sum_format'] . '<br/>';
	}
	$aColor_uwwtd_per_ent_and_dis ['domain'] = array (
			'entering',
			'discharged'
	);
	$aColor_uwwtd_per_ent_and_dis ['range'] = array (
			'#74FFE0',
			'#C00000'
	);






	/*
	 * FLIPCARDS
	 */
	// Total generated by compliance
	// Total agglomerations by compliance
    $page = ''
            . '<h1 align="center">'.$title.'</h1>'
            //. $form
            //.'<div class="rows map-row" >'.$rendermap.'</div>'
            .'<div class="rows charts-row" >'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'
                      .'<div class="leftgraph front">'
                        . '<div class="flot-title"><div class="flip-title">Total generated by compliance</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                        </div>'
                        . '<div class="view-content"><svg id="graph_generatedByCompliance" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="leftgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total generated by compliance</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $String_uwwtd_stat_national_compliance .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'

                      .'<div class="rightgraph front">'
                            . '<div class="flot-title"><div class="flip-title">Total agglomerations by compliance</div>


                            <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                            </div>'
                            . '<div class="view-content"><svg id="graph_agglomerationByCompliance" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="rightgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total agglomerations by compliance</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $String_uwwtd_stat_agglomeration_compliance .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
            .'</div>'
     ;
     //Total load entering by compliance
     //Load entering by compliance : total agglomerations
     $page .= '<div class="rows charts-row" >'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'
                      .'<div class="leftgraph front">'
                        . '<div class="flot-title"><div class="flip-title">Total load entering by compliance</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                        </div>'
                        . '<div class="view-content"><svg id="graph_loadenteringByCompliance" style="margin:10px;"/></div>'
                      .'</div>'

                             		.'<div class="leftgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total load entering by compliance</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_stat_national_uwwtpC .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'

                      .'<div class="rightgraph front">'
                            . '<div class="flot-title"><div class="flip-title">Load entering by compliance : total agglomerations</div>


                            <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                            </div>'
                            . '<div class="view-content"><svg id="graph_loadenteringByComplianceAgglomeration" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="rightgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Load entering by compliance : total agglomerations</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_stat_agglomeration_uwwtpC .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
            .'</div>'
     ;

     //Total load entering by treatment type
     //Load entering by treatment type : total agglomerations
     $page .= '<div class="rows charts-row" >'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'
                      .'<div class="leftgraph front">'
                        . '<div class="flot-title"><div class="flip-title">Total load entering by treatment type</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                        </div>'
                        . '<div class="view-content"><svg id="graph_loadenteringByTreatmenttype" style="margin:10px;"/></div>'
                      .'</div>'

                             		.'<div class="leftgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total load entering by treatment type</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_stat_national_uwwtpT .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip">'

                      .'<div class="rightgraph front">'
                            . '<div class="flot-title"><div class="flip-title">Load entering by treatment type : total agglomerations</div>


                            <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                            </div>'
                            . '<div class="view-content"><svg id="graph_loadenteringByTreatmenttypeAgglomeration" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="rightgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Load entering by treatment type : total agglomerations</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_stat_agglomeration_uwwtpT .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
            .'</div>'
     ;

     //Total generated load by agglomeration
     //
     $page .= '<div class="rows charts-row" >'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip" style=" height: 400px; ">'
                      .'<div class="leftgraph front">'
                        . '<div class="flot-title"><div class="flip-title">Total generated load by agglomeration</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                        </div>'
                        . '<div class="view-content"><svg id="graph_generatedByAgglomeration" style="margin:10px;"/></div>'
                      .'</div>'

                             		.'<div class="leftgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total generated load by agglomeration</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_stat_national_generated_by_agglomeration .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip" style=" height: 400px; ">'

                      .'<div class="rightgraph front">'
                            . '<div class="flot-title"><div class="flip-title">???</div>


                            <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                            </div>'
                            . '<div class="view-content"><svg id="123456" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="rightgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">???</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">Lorem ipsum dolor</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
            .'</div>'
     ;

	//Total load entering and discharged
	//BOD, COD, N, P concentration
     $page .= '<div class="rows charts-row" >'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip" style=" height: 400px; ">'
                      .'<div class="leftgraph front">'
                        . '<div class="flot-title"><div class="flip-title">Total load entering and discharged</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                        </div>'
                        . '<div class="view-content"><svg id="graph_load_ent_and_dis" style="margin:10px;"/></div>'
                      .'</div>'

                             		.'<div class="leftgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">Total load entering and discharged</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">'. $aString_uwwtd_load_ent_and_dis .'</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
                .'<div class="cell charts-rows-cell">'
                  .'<div class="cell-content">'
                    .'<div class="container flip" style=" height: 400px; ">'

                      .'<div class="rightgraph front">'
                            . '<div class="flot-title"><div class="flip-title">BOD, COD, N, P concentration</div>


                            <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-table-off.png').'" class="button-flipper to-table" title="See the data table" alt="See the data table">
                            </div>'
                            . '<div class="view-content"><svg id="123456" style="margin:10px;"/></div>'
                      .'</div>'

                      .'<div class="rightgraph back">'
                        . '<div class="flot-title flip-title-back"><div class="flip-title">BOD, COD, N, P concentration</div>


                        <img src="'.file_create_url(drupal_get_path('theme', 'uwwtd').'/images/corner-chart-off.png').'" class="button-flipper to-chart" title="See diagram" alt="See diagram">
                        </div>'
                        . '<div class="view-content">' . $aString_uwwtd_per_ent_and_dis . '</div>'
                      .'</div>'
                    .'</div>'
                  .'</div>'
                .'</div>'
            .'</div>'
     ;









/*

	$page .= '<div class="uwwcontainer" style="float:left;overflow:visible;">';
	$page .= '<fieldset class="uwwfull group-aggdescription field-group-fieldset group-description panel panel-default form-wrapper" style="min-height:430px;">';
	$page .= '<legend class="panel-heading">';
	$page .= '<div class="panel-title fieldset-legend">'.t('Description').'</div>';
	$page .= '</legend>';
	$page .= '<div class="panel-body">';
	$page .= '<div class="uwwrealthird">';*/
	/*print render($content['field_uwwloadenteringuwwtp']);
	print render($content['field_physicalcapacityactivity']);
	print render($content['field_uwwwastewatertreated']);
	print render($content['field_uwwbod5perf']);
	print render($content['field_uwwcodperf']);
	print render($content['field_uwwtssperf']);
	print render($content['field_uwwntotperf']);
	print render($content['field_uwwptotperf']);
	print render($content['field_uwwotherperf']);*/
/*	$page .= '</div>';
	$page .= '<div class="uwwrealthird">';
		$page .= '<div class="flip" id="uwwtp_stackedbar" style="position:relative;">';
			$page .= '<div class="front">';
				$page .= '<img src="' . file_create_url ( drupal_get_path ( 'theme', 'uwwtd' ) . '/images/corner-chart-off.png' ) . '" class="button-flipper table-to-chart" title="See diagram" alt="See diagram">';
				$page .= '<div class="field field-type-number-decimal field-label-inline clearfix">';
					$page .= '<div class="field-label">' . t ( 'Rate for Phosphorus:' ) . '</div>';
						$page .= '<div class="field-items">';
							$page .= '<div class="field-item">';
								$page .= '&nbsp; 10%';
								$page .= '&nbsp; 10%';
								$page .= '&nbsp; 10%';
							$page .= '</div>';
						$page .= '</div>';
					$page .= '</div>';
				$page .= '</div>';
				$page .= '<div class="back" style="position:absolute;">';
					$page .= '<img src="' . file_create_url ( drupal_get_path ( 'theme', 'uwwtd' ) . '/images/corner-table-off.png' ) . '" class="button-flipper chart-to-table" title="See the data table" alt="See the data table">';
					$page .= '<svg id="graph_generatedByCompliance"/>';
				$page .= '</div>';
			$page .= '</div>';
   $page .= '</div>';
            $page .= '<div class="uwwrealthird" style="float:right;">';*/
             /*print render($content['field_uwwcompliance']);
              print render($content['field_uwwtreatmenttype']);
              print render($content['field_uwwtreatmentrequired']);
              print render($content['field_uwwtreatment_met']);
              print render($content['field_uwwperformance_met']);
              print '<br><br><br><br><br><br><br><br>';*/
 /*           $page .= '</div>';
        $page .= '</div>';
      $page .= '</fieldset>';
    $page .= '</div>';
*/



	//$page .= '<fieldset><legend>Total load entering by compliance</legend><div id="graph_loadenteringByCompliance"/></fieldset>';
	//$page .= '<fieldset><legend>Total load entering by treatment type</legend><div id="graph_loadenteringByTreatmenttype"/></fieldset>';
	//$page .= '<fieldset><legend>Total generated load by agglomeration</legend><svg id="graph_generatedByAgglomeration"/></fieldset>';
	//$page .= '<fieldset><legend>Total load entering and discharged</legend><svg id="graph_load_ent_and_dis"/></fieldset>';
	$page .= "
    <script>
    jQuery(document).ready(function(){
        display_piechart_custom(".json_encode($Data_uwwtd_stat_national_compliance).",'graph_generatedByCompliance','end');
        display_piechart_custom(".json_encode($Data_uwwtd_stat_agglomeration_compliance).",'graph_agglomerationByCompliance','end');
        display_piechart_custom(".json_encode($aData_uwwtd_stat_national_uwwtpC).",'graph_loadenteringByCompliance','middle');
        display_piechart_custom(".json_encode($aData_uwwtd_stat_agglomeration_uwwtpC).",'graph_loadenteringByComplianceAgglomeration','middle');
        display_piechart_custom(".json_encode($aData_uwwtd_stat_national_uwwtpT).",'graph_loadenteringByTreatmenttype','middle');
		display_piechart_custom(".json_encode($aData_uwwtd_stat_agglomeration_uwwtpT).",'graph_loadenteringByTreatmenttypeAgglomeration','middle');

        stackedbar_nat_gen_load(".json_encode($aData_uwwtd_stat_national_generated_by_agglomeration).");
        stackedbar_load_ent_and_dis(".json_encode($aData_uwwtd_load_ent_and_dis).','. json_encode($aColor_uwwtd_load_ent_and_dis).");

    });
    </script>
    ";


	return $page;

}



?>